&CONTROL OFF NOMSG
* note - not an exec; a cmsbatch fragment to create an exec...
*
FILEDEF  INMOVE  TERM ( RECFM F BLOCK 80 LRECL 80
FILEDEF  OUTMOVE DISK KEDFLINK EXEC A  ( RECFM F BLOCK 80 LRECL 80
MOVEFILE
&CONTROL OFF NOMSG
&GOTO -MAIN
-HELP
&BEGTYPE
* *///////////////////////////////////////////////////////////////////
* *
* * KEDFLINK IS USED TO LINK KEDFXEQ IN CMSBATCH
* *
* * NEEDS MORE WORK FOR USE IN ZVM (NO EXECUTIL THERE!)
* *
* *//////1/////////2/////////3/////////4/////////5/////////6/////////7
&END
&EXIT
-MAIN
*
* IEW0364 ERROR - TABLE OVERFLOW -- INPUT TEXT EXCEEDED MAXIMUM OR TOO
*         MANY CHANGES OF ORIGIN IN INPUT.
*
* THE 'CURE' FOR IEW0364 IS TO BREAK UP THE MODULE AND/OR TO INCREASE
* THE SYSLMOD BLKSIZE.
*
* THAT'S WHY KEDFXEQ IS BROKEN UP IN CMS AND THAT'S WHY WE'RE USING
* A SYSLMOD CARD IN THE LINK BELOW TO GO FOR 1024INSTEAD OF 260.
*
* ITS NOW BROKEN UP IN MVS AS WELL, BUT THAT'S DUE TO SETUP ISSUES
* IN GOING FROM PC BASED TO MVS BASED SOURCE...
*
* PRESET RETURN-CODE VARS FOR 'REPORT CARD'
* -1 MEANS SKIPPED, -2 MEANS NOT USED
&LKEDRET = -1
&UNLKRET = -1
&CATLRET = -1
*
* LINK EDIT THE PROGRAM
-LKED
FILEDEF * CLEAR
EXEC KKILL KEDFXEQ LKEDIT     *
EXEC KKILL KEDFXEQ TXT        *
EXEC KKILL KEDFXEQ TXT        *
FILEDEF KIKENTRY DISK KIKENTRY TEXT *
FILEDEF KEDFXEQ  DISK KEDFXEQ  TEXT A
FILEDEF DOAPI    DISK DOAPI    TEXT *
FILEDEF DOBMS    DISK DOBMS    TEXT *
FILEDEF DOBOTTOM DISK DOBOTTOM TEXT *
FILEDEF DOCOMM   DISK DOCOMM   TEXT *
FILEDEF DOCWA    DISK DOCWA    TEXT *
FILEDEF DODCP    DISK DODCP    TEXT *
FILEDEF DODUMP   DISK DODUMP   TEXT *
FILEDEF DOEIB    DISK DOEIB    TEXT *
FILEDEF DOFCP    DISK DOFCP    TEXT *
FILEDEF DOFILTER DISK DOFILTER TEXT *
FILEDEF DOKCP    DISK DOKCP    TEXT *
FILEDEF DOMAIN   DISK DOMAIN   TEXT *
FILEDEF DOPCP    DISK DOPCP    TEXT *
FILEDEF DOSCP    DISK DOSCP    TEXT *
FILEDEF DOTIOA   DISK DOTIOA   TEXT *
FILEDEF DOTCP    DISK DOTCP    TEXT *
FILEDEF DOTCTTEU DISK DOTCTTEU TEXT *
FILEDEF DOTOP    DISK DOTOP    TEXT *
FILEDEF DOTRACE  DISK DOTRACE  TEXT *
FILEDEF DOTSP    DISK DOTSP    TEXT *
FILEDEF DOTWA    DISK DOTWA    TEXT *
*ILEDEF DOU24    DISK DOU24    TEXT *
FILEDEF DOUSR    DISK DOUSR    TEXT *
FILEDEF DOWS     DISK DOWS     TEXT *
FILEDEF GETMAPDS DISK GETMAPDS TEXT *
GLOBAL  TXTLIB
EXEC KKILL KEDFXEQ SYSLIN A
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE KIKENTRY ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE KEDFXEQ  ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOAPI    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOBMS    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOBOTTOM ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOCOMM   ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOCWA    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DODCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DODUMP   ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOEIB    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOFCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOFILTER ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOKCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOMAIN   ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOPCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOSCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTCP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTIOA   ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTCTTEU ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTOP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTRACE  ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTSP    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOTWA    ) TAB 2
*XECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOU24    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOUSR    ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE DOWS     ) TAB 2
EXECUTIL WRITE KEDFXEQ SYSLIN A * * F ( INCLUDE GETMAPDS ) TAB 2
FILEDEF SYSLIN   DISK KEDFXEQ SYSLIN A
FILEDEF SYSLMOD  DISK KEDFXEQ LOADLIB A (BLKSIZE 1024
LKED KEDFXEQ ( LIST XREF MAP NOTERM
&LKEDRET = &RETCODE
TYPE  KEDFXEQ LKEDIT
&IF &LKEDRET GT 4 &GOTO -RPTCARD
FILEDEF * CLEAR
COPY  KEDFXEQ LKEDIT A = = N (REPLACE
*YPE  KEDFXEQ LKEDIT
ERASE KEDFXEQ LKEDIT A
*
* TURN THE LOADMOD BACK INTO A CMS TEXT DECK
-UNLKED
FILEDEF * CLEAR
FILEDEF SYSPUNCH DISK KEDFXEQ TXT A (RECFM F LRECL 80 BLOCK 80
KUNLKED KEDFXEQ * *
&UNLKRET = &RETCODE
&IF &UNLKRET NE 0 &GOTO -RPTCARD
ERASE KEDFXEQ LOADLIB *
COPY KEDFXEQ TXT A KEDFXEQ TEXT A (REPLACE
ERASE KEDFXEQ TXT     *
*
* PUT THE TEXT DECK INTO THE TXTLIB
FILEDEF * CLEAR
CP SET EMSG OFF
-CATLG
TXTLIB DEL KIKSRPL KEDFXEQ
&IF &RETCODE EQ 0 &GOTO -CATLG
CP SET EMSG TEXT
TXTLIB ADD KIKSRPL KEDFXEQ
&CATLRET = &RETCODE
&IF &CATLRET NE 0 &GOTO -RPTCARD
ERASE KEDFXEQ TEXT    *
*
* GENERATE A 'REPORT CARD' FOR THIS RUN & CLEANUP...
-RPTCARD
FILEDEF * CLEAR
FILEDEF SYSPRINT TERM (RECFM F LRECL 80 BLOCK 80
FILEDEF SYSTERM  TERM (RECFM F LRECL 80 BLOCK 80
FILEDEF SYSIN   DUMMY (RECFM F LRECL 80 BLOCK 80
&WARN = 0
TYPE KBAR TYPE *
&TYPE &0 REPORT CARD FOR KEDFXEQ
&TYPE
KRPTRTN &LKEDRET 4 4 50 LINK EDIT
&IF &RETCODE GT &WARN &WARN = &RETCODE
KRPTRTN &UNLKRET 0 4 50 UN LINK EDIT
&IF &RETCODE GT &WARN &WARN = &RETCODE
KRPTRTN &CATLRET 0 4 50 CATALOG INTO KIKSRPL
&IF &RETCODE GT &WARN &WARN = &RETCODE
TYPE KBAR TYPE *
&IF &WARN EQ 0 &GOTO -RPT18
KBLOCK BAD
-RPT18
FILEDEF * CLEAR
&EXIT &WARN
/*
